Chalo isko aur **simple** tareeke se samjhte hain â€” bas 2 rule yaad rakho:

---

## ðŸ¤” Confusion:

`fees` ke aage `$` kyu nahi?
`"$speciality"` ke aage `$` kyu laga?

---

## âœ… RULE 1:

### ðŸ‘‰ Jab tum **field ka naam likh rahe ho (left side)**

To **`$` nahi lagta**

```js
{ fees: { $lt: 30 } }
```

âž¡ï¸ Matlab: â€œfees ki value 30 se kam hoâ€

ðŸ§  Yahan `fees` document ke andar ek field hai â€” **left side** hai, to bina `$` ke.

---

## âœ… RULE 2:

### ðŸ‘‰ Jab tum **field ki value lena chahte ho (right side)**

To **`$` lagta hai**

```js
{ _id: "$speciality" }
```

âž¡ï¸ Matlab: â€œ\_id ki value, speciality field ke barabar rakhoâ€

ðŸ§  Yahan `"$speciality"` ka matlab hai: **speciality field ki value lo**

---

### âš ï¸ `$` lagta hai sirf jab:

* Tum **field ki value** use kar rahe ho
* Right side mein jaise: `$group`, `$project`, `$addFields`, etc.

---

## ðŸ” Real-life analogy:

Socho ek doctor ka record hai:

```js
{
  name: "Dr. Khan",
  speciality: "Cardiology",
  fees: 500
}
```

### ðŸ”¹ Tum keh rahe ho:

> â€œfees 500 se kam hoâ€
> âž¡ï¸ `{ fees: { $lt: 500 } }`
> **fees left mein â€” no `$`**

---

### ðŸ”¹ Tum keh rahe ho:

> â€œspeciality ki value lo aur usse group banaoâ€
> âž¡ï¸ `{ _id: "$speciality" }`
> **speciality right mein â€” so `$speciality`**

---

Agar ab bhi confusion hai, to mujhe tumhara exact sentence batao jo tum samajhna chah rahi ho â€” main ussi example pe explain kar dungi.

[
  { $group: { _id: null, averageFees: { $avg: "$fees" } } }
]

Bahut badhiya sawaal! ðŸ‘‡

> MongoDB aggregation mein kaun **stage** hai aur kaun **operator** â€” ye kaise pata karein?

---

## âœ… 1. Aggregation Pipeline **Stages** kya hote hain?

Ye woh **top-level blocks** hote hain jo aggregation pipeline mein use hote hain â€” jaise `$match`, `$group`, `$project`, `$count`, etc.

### ðŸ”¹ Yeh likhte ho array ke andar:

```js
[
  { $match: { fees: { $lt: 500 } } },
  { $group: { _id: "$speciality", total: { $sum: 1 } } },
  { $count: "totalDocs" }
]
```

---

## âœ… 2. Aggregation **Operators** kya hote hain?

Yeh woh hote hain jo kisi **field ki calculation** ya **comparison** ke liye use hote hain â€” jaise `$sum`, `$avg`, `$lt`, `$eq`, `$multiply`, etc.

### ðŸ”¹ Yeh likhte ho kisi stage ke **andar**:

```js
{ $sum: 1 }
{ $avg: "$fees" }
{ $lt: 500 }
```

---

## ðŸ“Œ Kaise yaad rakhen: Stage vs Operator

| Stage (Pipeline) | Description        | Example                                                  |
| ---------------- | ------------------ | -------------------------------------------------------- |
| `$match`         | Filter karo        | `{ $match: { fees: { $lt: 500 } } }`                     |
| `$group`         | Group banao        | `{ $group: { _id: "$speciality", count: { $sum: 1 } } }` |
| `$project`       | Fields select karo | `{ $project: { name: 1, fees: 1 } }`                     |
| `$count`         | Total count do     | `{ $count: "totalDocs" }`                                |
| `$sort`          | Sorting karo       | `{ $sort: { fees: -1 } }`                                |

---

| Operator               | Description    | Use Inside           |
| ---------------------- | -------------- | -------------------- |
| `$sum`                 | Total jodna    | `$group`, `$project` |
| `$avg`                 | Average lena   | `$group`, `$project` |
| `$lt`                  | Less than      | `$match`             |
| `$eq`                  | Equal to       | `$match`, `$cond`    |
| `$multiply`            | Multiply karna | `$project`           |
| `$toInt` / `$toString` | Type convert   | `$project`           |

---

## ðŸŽ¯ Real Example:

```js
[
  {
    $match: { fees: { $lt: 500 } }         // âœ… stage
  },
  {
    $group: {
      _id: "$speciality",                  // âœ… stage
      avgFees: { $avg: "$fees" }           // âœ… operator
    }
  },
  {
    $count: "totalGroups"                  // âœ… stage
  }
]
```

---

## ðŸ§  Memory Tip:

* **Stage** = Top level block in pipeline
* **Operator** = Inner tool used **inside stages**

---

Agar chaho to main tumhe cheat-sheet ya image banake bhi de sakti ho â€” ya tumhare use-case pe guide kar sakti ho kaunsa kab use karna hai.


âœ… _id: null ka matlab:
"Sabhi documents ko ek hi group mein daal do"

$lookup